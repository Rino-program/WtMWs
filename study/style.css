:root{
  --bg:#0b1220;
  --bg-2:#0f172a;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --primary:#22c55e;
  --secondary:#334155;
  --danger:#ef4444;
  --card:#111827;
  --border:#1f2937;
}

@media (prefers-color-scheme: light){
  :root[data-theme="light"],
  :root:not([data-theme]){
    --bg:#f8fafc; --bg-2:#ffffff; --text:#0f172a; --muted:#475569;
    --primary:#16a34a; --secondary:#e2e8f0; --danger:#dc2626; --card:#ffffff; --border:#e5e7eb;
  }
}

@media (prefers-color-scheme: dark){
  :root[data-theme="dark"]{
    --bg:#0b1220; --bg-2:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
    --primary:#22c55e; --secondary:#334155; --danger:#ef4444; --card:#111827; --border:#1f2937;
  }
}

html,body{height:100%;}
body{
  margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--text); background:linear-gradient(180deg,var(--bg),var(--bg-2));
}
.app-header{display:flex; gap:16px; align-items:center; justify-content:space-between; padding:16px 20px; border-bottom:1px solid var(--border); position:sticky; top:0; backdrop-filter: blur(8px); background-color: color-mix(in lab, var(--bg-2) 80%, transparent);}
.app-title{margin:0; font-size:20px;}
.tabs{display:flex; gap:8px;}
.tab-button{background:var(--secondary); color:var(--text); border:1px solid var(--border); border-radius:8px; padding:8px 12px; cursor:pointer}
.tab-button.is-active{outline:2px solid var(--primary);}

main{max-width:1100px; margin:24px auto; padding:0 16px;}
.grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:16px;}
.card{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px;}
.timer{display:flex; flex-direction:column; align-items:center; gap:12px;}
.timer-mode{color:var(--muted)}
.time{font-size:64px; font-weight:700; letter-spacing:1px;}
.controls{display:flex; flex-wrap:wrap; gap:8px; justify-content:center}
button{border:none; border-radius:8px; padding:10px 14px; cursor:pointer; font-size:14px}
button.primary{background:var(--primary); color:#08140a}
button.secondary{background:var(--secondary); color:var(--text)}
button.danger{background:var(--danger); color:white}
button:disabled{opacity:.5; cursor:not-allowed}
.task-row{display:flex; gap:8px; align-items:center;}
.task-form{display:grid; grid-template-columns:1fr 1fr 1fr auto auto; gap:8px; margin-top:8px}
.task-form.hidden{display:none}
input, select{background:var(--bg-2); color:var(--text); border:1px solid var(--border); padding:8px; border-radius:8px;}
.stats{display:flex; gap:24px}
.stat-label{color:var(--muted); margin-right:8px}
.stat-value{font-weight:700}
.list{margin:0; padding-left:16px}
.row-gap{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.settings-grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap:8px}
.file-label input{display:none}
.file-label span{display:inline-block}
.app-footer{padding:16px; text-align:center; color:var(--muted)}
.sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0}
.hint{color:var(--muted); font-size:12px}

/* responsive */
@media (max-width:600px){
  .time{font-size:48px}
  .task-form{grid-template-columns:1fr;}
}
