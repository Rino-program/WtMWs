/* poststyle.css — ポスト一覧ページ用スタイル
   見やすさ重視 + 更新しやすい構造
   1) カラーテーマはCSS変数で集中管理
   2) タグUIと本文はクラスで制御（JSはclassの付け外しのみ）
   3) 本文は3行でクランプ。展開時は .expanded を付与
*/

:root{
  --bg: #0b0c0f;
  --card: #12141a;
  --text: #eae8e4;
  --subtext: #bab4ad;
  --border: #2a2f3a;
  /* 暖色系アクセント（青から変更） */
  --accent: #ff7a59;            /* コーラル系 */
  --accent-weak: rgba(255,122,89,.16);
  --danger: #ff6b6b;
  --radius: 12px;
  --radius-sm: 8px;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --shadow-soft: 0 4px 14px rgba(0,0,0,.25);
  --maxw: 960px;
}

@media (prefers-color-scheme: light) {
  :root{
    --bg: #faf7f3;
    --card: #ffffff;
    --text: #2a201b;
    --subtext: #6e635b;
    --border: #e7e0d9;
    --accent: #d2643a;          /* ライトモードの暖色 */
    --accent-weak: rgba(210,100,58,.12);
    --shadow: 0 8px 20px rgba(0,0,0,.08);
    --shadow-soft: 0 4px 12px rgba(0,0,0,.06);
  }
}

/* 明暗切替のためのユーティリティ: html[data-theme] を使ってモバイルでも確実に上書き */
html[data-theme='light']{
  --bg: #faf7f3;
  --card: #ffffff;
  --text: #2a201b;
  --subtext: #6e635b;
  --border: #e7e0d9;
  --accent: #d2643a;
  --accent-weak: rgba(210,100,58,.12);
  --shadow: 0 8px 20px rgba(0,0,0,.08);
  --shadow-soft: 0 4px 12px rgba(0,0,0,.06);
}
html[data-theme='dark']{
  --bg: #0b0c0f;
  --card: #12141a;
  --text: #eae8e4;
  --subtext: #bab4ad;
  --border: #2a2f3a;
  --accent: #ff7a59;
  --accent-weak: rgba(255,122,89,.16);
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --shadow-soft: 0 4px 14px rgba(0,0,0,.25);
}

/* テーマスイッチャー */
#theme-switcher{ margin-top:.6rem; display:flex; gap:.5rem; }
.theme-btn{
  padding:.35rem .6rem; border-radius:8px; border:1px solid var(--border);
  background:var(--card); color:var(--text); cursor:pointer; font-weight:600;
  box-shadow: var(--shadow-soft);
}
.theme-btn[aria-pressed="true"]{ background:var(--accent); color:#fff; border-color:var(--accent); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
.theme-btn:focus-visible{ outline: 3px solid rgba(0,0,0,0.06); outline-offset: 2px }

/* ボタンやpill系の色調整（グローバル） */
.nav-step, .tag-btn, .more-btn, button[onclick="history.back()"], #to-top-btn{
  transition: transform .08s ease, background .12s ease, border-color .12s ease;
}
.tag-btn.selected, .nav-step.selected{ background: var(--accent); color: #fff; border-color: var(--accent); }

/* ナビの見た目を少し改善 */
#nav-inline{ padding: .6rem 0; display:flex; gap:.4rem; flex-wrap:wrap; }
.nav-step{ border:1px solid var(--border); background:transparent; color:var(--accent); padding:.35rem .6rem; border-radius:999px; }
.nav-step:hover{ background:var(--accent-weak); }


*{ box-sizing: border-box; }
html{ scroll-behavior: smooth; }
body{
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  /* 背景のアクセントも暖色に */
  background: radial-gradient(1200px 800px at 10% -10%, rgba(255,122,89,.08), transparent 60%) ,
              radial-gradient(1200px 800px at 110% 20%, rgba(255,122,89,.06), transparent 60%),
              var(--bg);
  color: var(--text);
  line-height: 1.75;
}

/* コンテナ */
main, .container{
  width: min(100%, var(--maxw));
  margin: 0 auto;
  padding: 0 16px;
}

/* ヘッダー */
/* 新ヘッダー（コンパクト・セミスティッキー） */
.site-header{
  position: sticky;
  top: 0;
  z-index: 1100;
  width: 100%;
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(10px);
  background:
    linear-gradient(135deg,
      rgba(255,154,158,0.14) 0%,
      rgba(254,207,239,0.10) 25%,
      rgba(168,237,234,0.09) 50%,
      rgba(254,214,227,0.10) 75%,
      rgba(255,122,89,0.14) 100%)
    , color-mix(in oklab, var(--bg) 86%, transparent);
}
.header-inner{
  width: min(100%, var(--maxw));
  margin: 0 auto;
  padding: .65rem 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
}
.site-header h1{
  margin: 0;
  font-size: clamp(1.05rem, .9rem + .9vw, 1.6rem);
}
.header-right{ display:flex; align-items:center; gap:.75rem; }
.header-right .meta{ display:flex; gap:.4rem; align-items:center; color: var(--subtext); }
.badge{
  display:inline-block; padding:.2rem .5rem; border:1px solid var(--border);
  border-radius: 999px; font-size:.8rem; background: var(--card); color: var(--subtext);
}
/* 旧ヘッダーの余白削減 */
nav, #jump-form{ margin-top: .6rem; }

/* パステルグラデーションボタン類 */
.theme-btn, .nav-step, .tag-btn, #jump-btn, #search-clear, #tag-list-more-btn, .more-btn{
  position: relative;
  overflow: hidden;
}
.theme-btn::before, .nav-step::before, .tag-btn::before, 
#jump-btn::before, #search-clear::before, #tag-list-more-btn::before, .more-btn::before{
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(45deg, 
    rgba(255,154,158,0.1), rgba(254,207,239,0.1), 
    rgba(168,237,234,0.1), rgba(254,214,227,0.1));
  opacity: 0;
  transition: opacity 0.3s ease;
}
.theme-btn:hover::before, .nav-step:hover::before, .tag-btn:hover::before,
#jump-btn:hover::before, #search-clear:hover::before, #tag-list-more-btn:hover::before, .more-btn:hover::before{
  opacity: 1;
}

/* ナビ（ページ内） */
nav{
  width: min(100%, var(--maxw));
  margin: 0 auto 1rem;
  padding: 0 16px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}
nav::-webkit-scrollbar{ height: 6px; }
nav::-webkit-scrollbar-thumb{ background: var(--border); border-radius: 6px; }
nav li{ list-style: none; display: inline-block; margin-right: .4rem; }
nav a{
  display: inline-block;
  padding: .35rem .7rem;
  border-radius: var(--radius-sm);
  color: var(--accent);
  background: var(--accent-weak);
  text-decoration: none;
}
nav a:hover{ filter: brightness(1.1); }

/* 動的に生成するナビ（各投稿の#番号へ） */
#nav-inline{ padding: 0; margin: .25rem 0 0; }
#nav-inline li{ list-style: none; display: inline-block; margin: 0 .4rem .4rem 0; }
#nav-inline a{ white-space: nowrap; }

/* nav-step は動的に作られるボタンなので見た目を整える */
.nav-step{
  -webkit-appearance: none;
  appearance: none;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--accent);
  padding: .35rem .7rem;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font: inherit;
  line-height: 1;
  transition: background .12s ease, border-color .12s ease, color .12s ease, transform .08s ease;
}
.nav-step:hover{ filter: brightness(1.03); transform: translateY(-1px); }
.nav-step:active{ transform: translateY(0); }
.nav-step:focus-visible{ outline: 2px solid var(--accent); outline-offset: 2px; }

/* 小さい画面でボタンが並び切らない時の余白調整 */
@media (max-width: 520px){
  .nav-step{ padding: .3rem .5rem; font-size: .95rem; }
}

/* ジャンプフォーム */
#jump-form{
  width: min(100%, var(--maxw));
  margin: .25rem auto 1.25rem;
  padding: .75rem 1rem;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: .5rem;
  align-items: center;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
}
#jump-form label{ color: var(--subtext); }
#jump-input{
  height: 40px;
  padding: 0 .75rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
}
#jump-btn{
  height: 40px;
  padding: 0 1rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--accent);
  background: var(--accent-weak);
  color: var(--accent);
  cursor: pointer;
}
#jump-btn:hover{ filter: brightness(1.1); }

/* キーワード検索フォーム */
#search-form{
  width: min(100%, var(--maxw));
  margin: 0 auto 1rem;
  padding: .75rem 1rem;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: .5rem;
  align-items: center;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
}
#search-input{
  height: 40px;
  padding: 0 .75rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
}
#search-clear{
  height: 40px;
  padding: 0 .9rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--subtext);
  cursor: pointer;
}
#search-clear:hover{ filter: brightness(1.1); }

/* タグ一覧 */
#tag-list{ width: min(100%, var(--maxw)); margin: 0 auto; }
#tag-list-flex{
  display: flex; flex-wrap: wrap; gap: .5rem; justify-content: center;
  max-height: 2.9rem; /* 2行相当 */
  overflow: hidden;
  transition: max-height .25s ease;
}
#tag-list-flex.expanded{ max-height: 999px; }
#tag-list-more-btn{
  margin: .5rem auto 0; display: block;
  padding: .4rem .9rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  cursor: pointer;
}
.tag-btn{
  padding: .35rem .75rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  cursor: pointer;
}
.tag-btn:hover{ border-color: var(--accent); }
.tag-btn.selected{
  color: #fff; background: var(--accent);
  border-color: var(--accent);
}

/* セクション（各ポスト） */
section{
  width: min(100%, var(--maxw));
  margin: 1rem auto;
  padding: 1.1rem 1rem 1rem;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 4px);
  box-shadow: var(--shadow), 0 0 0 1px rgba(255,154,158,0.03);
  position: relative;
  transition: transform .08s ease, box-shadow .12s ease;
}
section:hover{ 
  transform: translateY(-4px); 
  box-shadow: 0 12px 30px rgba(0,0,0,.18), 
              0 0 25px rgba(255,154,158,0.08),
              0 0 35px rgba(168,237,234,0.05);
}
section h2{
  margin: 0 0 .25rem; display:flex; align-items:center; gap:.6rem;
  font-size: clamp(1rem, .9rem + .6vw, 1.25rem);
}
section h2::before{ 
  content:''; display:inline-block; width:6px; height:18px; 
  background: linear-gradient(45deg, #ff9a9e, #fecfef, #a8edea);
  border-radius:3px; 
}
/* 見出しにアンカーコピー用のボタンを表示（デスクトップのみ） */
section h2{ position: relative; padding-right: 2rem; }
.anchor-copy{
  position: absolute; top: 0; right: .25rem;
  display: none; /* モバイルでは邪魔になりがち */
  width: 28px; height: 28px;
  border-radius: 6px; border: 1px solid var(--border);
  background: var(--card);
  color: var(--subtext); cursor: pointer; font-size:14px; line-height:1; padding:0;
}
@media (hover:hover){
  section:hover .anchor-copy{ display: inline-grid; place-items: center; }
  .anchor-copy:hover{ color: var(--accent); border-color: var(--accent); }
}

/* タッチ環境では常に表示してタップでコピーできるようにする */
@media (hover:none) and (pointer:coarse){
  .anchor-copy{ display: inline-grid; place-items: center; opacity: .95; }
  .anchor-copy{ width: 34px; height: 34px; border-radius: 8px; }
}

/* 見た目の微強化 */
section{ transition: transform .08s ease, box-shadow .12s ease; }
section:hover{ transform: translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,.18); }
.post-content{ color: var(--text); }

/* 本文内のリンクを控えめに */
.post-content a{
  color: color-mix(in oklab, var(--text) 85%, var(--accent) 15%);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
  text-decoration-color: color-mix(in oklab, var(--accent) 35%, transparent);
  transition: color .15s ease, text-decoration-color .15s ease, filter .15s ease;
  overflow-wrap: anywhere; /* 長い素URL対策 */
  word-break: break-word;
}
.post-content a:hover, .post-content a:focus-visible{
  color: var(--accent);
  text-decoration-color: var(--accent);
}
.post-content a:visited{
  color: color-mix(in oklab, var(--text) 88%, var(--accent) 12%);
}
section[data-tags]::before{
  content: attr(data-tags);
  position: absolute; top: .6rem; right: .8rem;
  font-size: .75rem; letter-spacing: .02em;
  color: var(--subtext);
}

/* スクロール・リビール（初期は少し下からフェードイン） */
.reveal-init{ opacity: 0; transform: translateY(10px) scale(.985); filter: saturate(.9) blur(.2px); }
.reveal-init.revealed{ opacity: 1; transform: none; filter: none; transition: opacity .5s ease, transform .5s ease, filter .6s ease; }

/* アンカーで飛んだ時の余白調整（固定ヘッダー対策にも有効） */
section{ scroll-margin-top: 72px; }

/* 本文クランプ（初期3行） */
.post-content{
  display: -webkit-box;
  /* 一部エンジン向け（標準プロパティも併記） */
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  max-height: 4.8em; /* 安全側で高さも指定 */
  transition: max-height .2s ease;
  white-space: normal;
}
.post-content.expanded{
  -webkit-line-clamp: initial;
  line-clamp: initial;
  max-height: none;
}

/* 画像サムネイル（本文内に置ける） */
.post-media{
  display: block;
  max-width: 100%;
  margin: .6rem 0;
  border-radius: 8px;
  overflow: hidden;
  cursor: zoom-in;
}
.post-media img{
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  /* 最大表示高さを制限してカード高さを抑える */
  max-height: 220px;
}

/* ライトボックス（モーダル） */
.p-modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.65);
  z-index: 3000; /* ヘッダーやコンフェッティより上 */
  padding: 24px;
}
.p-modal.open{ display: flex; }
.p-modal img{
  max-width: 100%;
  max-height: 100%;
  border-radius: 8px;
  box-shadow: 0 10px 40px rgba(0,0,0,.6);
}
.p-modal .close-btn{
  position: absolute; top: 12px; right: 12px;
  background: rgba(0,0,0,.35);
  color: #fff; border: 1px solid rgba(255,255,255,.25);
  padding: .5rem .65rem; border-radius: 12px; cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,.3);
  touch-action: manipulation; /* タッチ環境での反応性向上 */
  z-index: 1; display: grid; place-items: center;
}
.p-modal .close-btn:hover{ background: rgba(0,0,0,.5); }

/* クリックしやすいヒットエリアを拡大 */
.p-modal .close-btn::after{
  content: '';
  position: absolute; inset: -6px; /* 実質ヒット領域＋12px */
}

/* 豪華なクラッカー演出 */
.confetti-piece{
  position: fixed; left: 0; top: 0; pointer-events: none; z-index: 3000;
  transform: translate(var(--x,0), var(--y,0)) rotate(0deg);
  animation: confetti-fall 1200ms ease-out forwards;
  will-change: transform, opacity;
}

/* 通常のコンフェッティ */
.confetti-piece.normal{
  width: 8px; height: 8px; border-radius: 2px; opacity: .95;
}

/* 特別なクラッカー（星や円） */
.confetti-piece.star{
  width: 12px; height: 12px; opacity: .9;
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
}
.confetti-piece.circle{
  width: 10px; height: 10px; border-radius: 50%; opacity: .85;
}
.confetti-piece.heart{
  width: 10px; height: 10px; opacity: .8;
  transform: translate(var(--x,0), var(--y,0)) rotate(45deg);
}
.confetti-piece.heart::before,
.confetti-piece.heart::after{
  content: ''; position: absolute; width: 6px; height: 10px; background: inherit; border-radius: 6px 6px 0 0;
}
.confetti-piece.heart::before{ left: 2px; transform: rotate(-45deg); transform-origin: 0 100%; }
.confetti-piece.heart::after{ left: 0; transform: rotate(45deg); transform-origin: 100% 100%; }

@keyframes confetti-fall{
  0%{ opacity: 1; transform: translate(var(--x,0), var(--y,0)) rotate(0deg) scale(0.8); }
  15%{ opacity: 1; transform: translate(var(--x,0), var(--y,0)) rotate(var(--rot-mid, 30deg)) scale(1.1); }
  100%{ 
    opacity: 0; 
    transform: translate(calc(var(--x,0) + var(--dx, 0)), calc(var(--y,0) + var(--dy, 40px))) 
              rotate(var(--rot, 45deg)) scale(0.6); 
  }
}

/* パステル虹色の進捗バー */
.rainbow-progress{
  position: fixed; top: 0; left: 0; width: 100%; height: 4px; z-index: 9999;
  background: linear-gradient(90deg, 
    #ff9a9e 0%, #fecfef 12.5%, #fecfef 25%, 
    #a8edea 37.5%, #fed6e3 50%, #d299c2 62.5%, 
    #fad0c4 75%, #a8d8ff 87.5%, #c2e9fb 100%);
  background-size: 200% 100%;
  animation: rainbow-shift 3s linear infinite;
  transform: scaleX(var(--progress, 0));
  transform-origin: left;
  transition: transform 0.1s ease-out;
}
@keyframes rainbow-shift{
  0%{ background-position: 0% 50%; }
  100%{ background-position: 200% 50%; }
}

/* キラキラ文字エフェクト */
.sparkle-text{
  position: relative;
  background: linear-gradient(45deg, #ff9a9e, #fecfef, #a8edea, #fed6e3);
  background-size: 200% 200%;
  -webkit-background-clip: text; background-clip: text;
  color: transparent;
  animation: sparkle-gradient 4s ease-in-out infinite;
}
@keyframes sparkle-gradient{
  0%, 100%{ background-position: 0% 50%; }
  50%{ background-position: 100% 50%; }
}

.sparkle-text::before{
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at var(--sparkle-x, 20%), rgba(255,255,255,0.8) 0%, transparent 2%),
              radial-gradient(circle at var(--sparkle-x2, 60%), rgba(255,255,255,0.6) 0%, transparent 3%),
              radial-gradient(circle at var(--sparkle-x3, 80%), rgba(255,255,255,0.7) 0%, transparent 2%);
  animation: sparkle-move 2.5s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}
@keyframes sparkle-move{
  0%{ --sparkle-x: 20%; --sparkle-x2: 60%; --sparkle-x3: 80%; opacity: 0; }
  25%{ --sparkle-x: 40%; --sparkle-x2: 20%; --sparkle-x3: 90%; opacity: 1; }
  50%{ --sparkle-x: 80%; --sparkle-x2: 70%; --sparkle-x3: 30%; opacity: 0.8; }
  75%{ --sparkle-x: 60%; --sparkle-x2: 90%; --sparkle-x3: 10%; opacity: 1; }
  100%{ --sparkle-x: 20%; --sparkle-x2: 60%; --sparkle-x3: 80%; opacity: 0; }
}

/* もっと見るボタン */
.more-btn{
  margin-top: .5rem;
  padding: .35rem .8rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--accent);
  cursor: pointer;
}
.more-btn:hover{ border-color: var(--accent); background: var(--accent-weak); }

/* ハイライト（ジャンプ直後に点灯） */
@keyframes pulse-bg {
  0% { box-shadow: 0 0 0 0 rgba(90,169,255,.65); }
  100% { box-shadow: 0 0 0 18px rgba(90,169,255,0); }
}
.highlight{ animation: pulse-bg .9s ease-out 1; }

/* フッターなど */
footer{ width: min(100%, var(--maxw)); margin: 1.5rem auto; padding: 1rem; color: var(--subtext); }

/* 戻るボタンを画面右下のフローティングに */
button[onclick="history.back()"]{
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 1000;
  padding: .6rem 1rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--accent);
  box-shadow: var(--shadow);
}
button[onclick="history.back()"]:hover{ background: var(--accent-weak); border-color: var(--accent); }
@supports(padding:max(0px)){
  button[onclick="history.back()"]{ bottom: max(16px, env(safe-area-inset-bottom, 16px)); right: max(16px, env(safe-area-inset-right, 16px)); }
}

/* 先頭へボタン */
#to-top-btn{
  position: fixed;
  right: 16px;
  bottom: 72px;
  z-index: 1000;
  width: 40px; height: 40px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--accent);
  box-shadow: var(--shadow);
  display: none;
}
#to-top-btn.show{ display: inline-flex; align-items: center; justify-content: center; }
#to-top-btn:hover{ background: var(--accent-weak); border-color: var(--accent); }

/* ヘルプボタン（iPad/タッチデバイス用） */
#help-btn{
  position: fixed;
  left: 16px;
  bottom: 72px;
  z-index: 1000;
  width: 40px; height: 40px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--accent);
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: var(--shadow);
  display: none;
  align-items: center;
  justify-content: center;
}

/* タッチデバイスでヘルプボタンを表示 */
@media (hover: none) and (pointer: coarse) {
  #help-btn{ display: inline-flex; }
}

/* 小さい画面でも表示（iPad縦向きなど） */
@media (max-width: 768px) {
  #help-btn{ display: inline-flex; }
}

#help-btn:hover{ background: var(--accent-weak); border-color: var(--accent); }
#help-btn:active{ transform: scale(0.95); }

/* ボタンのフォーカス見やすく */
button:focus-visible, a:focus-visible, input:focus-visible{
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* 小さめ画面調整 */
@media (max-width: 768px) {
  .header-inner {
    flex-wrap: wrap;
    gap: .5rem;
  }
  .header-right {
    gap: .5rem;
    flex-wrap: wrap;
    justify-content: flex-end;
  }
}

@media (max-width: 600px) {
  /* ヘッダー: タイトルとそれ以外を縦に */
  .header-inner {
    flex-direction: column;
    align-items: flex-start;
  }
  .header-right {
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
  }

  /* ジャンプフォームと検索フォームを縦レイアウトに */
  #jump-form, #search-form {
    grid-template-columns: 1fr;
    gap: .5rem;
    padding: .75rem;
  }
  #jump-form label, #search-form label {
    grid-column: 1 / -1;
    margin-bottom: 0;
  }
  #jump-input, #jump-btn, #search-input, #search-clear {
    grid-column: 1 / -1;
    width: 100%;
  }
  #jump-form {
    grid-auto-rows: auto;
  }
}

@media (max-width: 420px) {
    /* 特に狭い画面では、更新日などを非表示に */
    .header-right .meta {
        display: none;
    }
    .header-right {
        justify-content: flex-start;
    }
}

/* 低速/低刺激環境ではアニメーションを減らす */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}

/* 印刷簡易 */
@media print{
  header, nav, #jump-form, #tag-list, .more-btn, button[onclick="history.back()"]{ display: none !important; }
  section{ box-shadow: none; border-color: #aaa; }
}
